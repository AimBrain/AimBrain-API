## Authentication

> To generate and run curl request using curl_hmac_authenticator.py tool:

```shell
python2 curl_hmac_authenticator.py bank secret POST /v1/requests\
    '{"ids":["XXXXXXXX"],"timeout":180,"modules":[0],"threshold":0.5,"attempts":3,"title":"Title","summary":"Summary"}'
```

> Example output:

```shell
curl https://authenticator.aimbrain.com:443/v1/requests\
    -H 'Content-Type: application/json'\
    -H 'X-aimbrain-apikey: bank'\
    -H 'X-aimbrain-signature: /1vf7VfMHoLPcKgRBqTqATpP16MqoyyA3e05SgxtSxQ='\
    -d '{"ids":["XXXXXXXX"],"timeout":180,"modules":[0],"threshold":0.5,"attempts":3,"title":"Title","summary":"Summary"}'
```

AimBrain uses API key pairs (API key and API secret) to allow access to the API. You can register a new API key by [emailing us](mailto:team@aimbrain.com).

AimBrain expects for the API key and HMAC Signature to be included in all API requests to the server in the HTTP headers that look like the following:

`X-aimbrain-apikey: api-key`<br>
`X-aimbrain-signature: base64-hmac-signature`

To make development, testing and debugging easier we provide a [python tool for generating correctly signed and formed curl requests](https://github.com/aimbrain/aimbrain-utils/blob/master/curl_hmac_authenticator.py), as shown in the example.

<aside class="notice">
Remember - in the examples you must replace <code>bank</code> with your personal API Key and <code>secret</code> with your personal API Secret.
</aside>

### Generating X-aimbrain-signature

Use base64 encoded HMAC SHA256 digest as the request signature:

`X-aimbrain-signature = base64(HMAC_SHA256(secret, message))`, where

`secret` is your API Secret, and

`message = uppercase_http_method + '\n' + lovercase_endpoint + '\n' + request_body`.
